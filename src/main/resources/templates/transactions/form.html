<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title
      th:text="${transaction.id == null ? 'Tambah' : 'Edit'} + ' Transaksi - MoneyTracker'"
    >
      Form Transaksi
    </title>
    <link rel="stylesheet" th:href="@{/css/app.css}" />
    <link rel="stylesheet" th:href="@{/css/fontawesome.css}" />
  </head>
  <body>
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <main class="content">
      <div class="container">
        <div class="dashboard-header mb-6">
          <h1
            style="font-size: 1.9rem; margin-bottom: 0.5rem"
            th:text="${transaction.id == null ? 'Tambah Transaksi Baru' : 'Edit Transaksi'}"
          >
            Tambah Transaksi
          </h1>
        </div>

        <div
          class="auth-card"
          style="max-width: 700px; margin: 0 auto; padding: 2.5rem"
        >
          <form
            th:action="@{/transactions}"
            th:object="${transaction}"
            method="post"
            class="flex flex-col gap-5"
          >
            <input type="hidden" th:field="*{id}" />

            <div class="form-group">
              <label class="form-label">
                <i
                  class="fas fa-calendar-alt mr-2"
                  style="color: var(--navy-primary)"
                ></i>
                Tanggal Transaksi
              </label>
              <input
                type="date"
                th:field="*{date}"
                class="form-control"
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label">
                <i
                  class="fas fa-exchange-alt mr-2"
                  style="color: var(--navy-primary)"
                ></i>
                Tipe Transaksi
              </label>
              <select th:field="*{type}" class="form-control" required>
                <option value="">-- Pilih Tipe --</option>
                <option value="IN">Pemasukan</option>
                <option value="OUT">Pengeluaran</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">
                <i
                  class="fas fa-money-bill-wave mr-2"
                  style="color: var(--navy-primary)"
                ></i>
                Jumlah (Rp)
              </label>
              <input
                type="number"
                step="1000"
                min="0"
                placeholder="Contoh: 500000"
                th:field="*{amount}"
                class="form-control"
                required
              />
              <span
                class="text-danger text-sm mt-1 block"
                th:if="${#fields.hasErrors('amount')}"
                th:errors="*{amount}"
              >
              </span>
            </div>

            <div class="form-group">
              <label class="form-label">
                <i
                  class="fas fa-align-left mr-2"
                  style="color: var(--navy-primary)"
                ></i>
                Keterangan
              </label>
              <textarea
                th:field="*{description}"
                class="form-control"
                rows="3"
                placeholder="Contoh: Bayar listrik, beli ATK"
                required
              ></textarea>

              <span
                class="text-danger text-sm mt-1 block"
                th:if="${#fields.hasErrors('description')}"
                th:errors="*{description}"
              >
              </span>
            </div>

            <div class="form-group">
              <label class="form-label">
                <i
                  class="fas fa-tags mr-2"
                  style="color: var(--navy-primary)"
                ></i>
                Kategori
              </label>

              <select th:field="*{category.id}" class="form-control" required>
                <option value="">-- Pilih Kategori --</option>
                <option
                  th:each="c : ${categories}"
                  th:value="${c.id}"
                  th:text="${c.name}"
                ></option>
              </select>

              <span
                class="text-danger text-sm mt-1 block"
                th:if="${#fields.hasErrors('category')}"
              >
                Kategori wajib dipilih
              </span>
            </div>
            <div th:if="${error}" class="alert alert-danger mb-4">
              <i class="fas fa-exclamation-circle"></i>
              <span th:text="${error}"></span>
            </div>
            <div class="flex gap-3 mt-6">
              <button type="submit" class="btn btn-primary flex-1">
                <i class="fas fa-save mr-2"></i>
                Simpan Transaksi
              </button>
              <a
                th:href="@{/transactions}"
                class="btn btn-outline flex-1 text-center"
              >
                <i class="fas fa-arrow-left mr-2"></i>
                Batal
              </a>
            </div>
          </form>
        </div>
      </div>
    </main>
  </body>
</html>
